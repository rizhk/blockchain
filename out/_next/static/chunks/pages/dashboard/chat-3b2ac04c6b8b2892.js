(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{34717:function(e,r,t){"use strict";t.d(r,{X:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,o.jsx)("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),"Archive")},53474:function(e,r,t){"use strict";t.d(r,{B:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})}),"DotsHorizontal")},31406:function(e,r,t){"use strict";t.d(r,{j:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"MenuAlt4")},87509:function(e,r,t){"use strict";t.d(r,{$:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),"PaperAirplane")},3311:function(e,r,t){"use strict";t.d(r,{F:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),"PaperClip")},73536:function(e,r,t){"use strict";t.d(r,{D:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photograph")},67067:function(e,r,t){"use strict";t.d(r,{v:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Plus")},55186:function(e,r,t){"use strict";t.d(r,{r:function(){return i}});var n=t(82066),o=t(85893),i=(0,n.Z)((0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash")},15983:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ir}});var n=t(59499),o=t(67294),i=t(9008),c=t(11163),s=t(98396),a=t(87357),l=t(93946),u=t(87952),d=t(15861),p=t(11496),f=t(84717),h=t(44265),x=t(50029),j=t(27812),v=t(87794),b=t.n(v),y=t(67720),m=t(88755),g=t(52269),w=t(4730),O=t(50135),Z=t(87109),P=t(87918),S=t(23926),k=t(21849),C=t(55113),D=t(78462),z=t(9875),R=t(18987),E=t(59334),A=t(75919),M=t(38290),B=t(83382),I=t(85893),T=["onAddRecipient","onRemoveRecipient","recipients"];function H(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?H(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var F=function(e){var r=e.onAddRecipient,t=e.onRemoveRecipient,n=e.recipients,i=(0,w.Z)(e,T),c=(0,o.useRef)(null),s=(0,o.useState)(""),l=s[0],p=s[1],f=(0,o.useState)(!0),h=f[0],v=f[1],y=(0,o.useState)([]),m=y[0],g=y[1],H=l&&h,F=function(e,r){var t=r.reduce((function(e,r){return[].concat((0,j.Z)(e),[r.id])}),[]);return e.filter((function(e){return!t.includes(e.id)}))}(m,n),G=function(){var e=(0,x.Z)(b().mark((function e(r){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,p(t),!t){e.next=10;break}return e.next=6,A.x.getContacts(t);case 6:n=e.sent,g(n),e.next=11;break;case 10:g([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.Z,W(W({sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1}},i),{},{children:(0,I.jsx)(B.L,{children:(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,I.jsx)(a.Z,{ref:c,sx:{alignItems:"center",display:"flex",mr:1,"& .MuiInputBase-root":{backgroundColor:"background.paper",height:40,minWidth:260}},children:(0,I.jsx)(O.Z,{fullWidth:!0,onBlur:function(){H||v(!1)},onChange:G,onFocus:function(){v(!0)},placeholder:"Search contacts",InputProps:{startAdornment:(0,I.jsx)(Z.Z,{position:"start",children:(0,I.jsx)(M.o,{fontSize:"small"})})},value:l})}),(0,I.jsx)(d.Z,{color:"textSecondary",sx:{mr:2},variant:"body2",children:"To:"}),n.reverse().map((function(e){return(0,I.jsx)(P.Z,{avatar:(0,I.jsx)(u.Z,{src:e.avatar}),label:e.name,onDelete:function(){return r=e.id,void(t&&t(r));var r},sx:{mr:2}},e.id)}))]})})})),H&&(0,I.jsx)(S.Z,{onClickAway:function(){v(!1)},children:(0,I.jsx)(k.Z,{anchorEl:null===c||void 0===c?void 0:c.current,open:h,placement:"bottom-start",children:(0,I.jsx)(C.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:0===F.length?(0,I.jsxs)(a.Z,{sx:{p:2,textAlign:"center"},children:[(0,I.jsx)(d.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,I.jsxs)(d.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",l,'". Try checking for typos or using complete words.']})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.Z,{sx:{px:2,pt:2},children:(0,I.jsx)(d.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"})}),(0,I.jsx)(D.Z,{children:F.map((function(e){return(0,I.jsxs)(z.ZP,{button:!0,onClick:function(){return t=e,p(""),void(r&&r(t));var t},children:[(0,I.jsx)(R.Z,{children:(0,I.jsx)(u.Z,{src:e.avatar})}),(0,I.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})})})})]})};F.defaultProps={recipients:[]};var G=t(34386),V=t(87509),_=t(73536),X=t(3311),L=["disabled","onSend"];function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function K(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var q=function(e){var r=e.disabled,t=e.onSend,n=(0,w.Z)(e,L),i=(0,o.useRef)(null),c=(0,o.useState)(""),s=c[0],d=c[1],p=function(){var e;null===(e=i.current)||void 0===e||e.click()},f=function(){s&&(null===t||void 0===t||t(s),d(""))};return(0,I.jsxs)(a.Z,K(K({sx:{alignItems:"center",backgroundColor:"background.paper",display:"flex",flexShrink:0,p:3}},n),{},{children:[(0,I.jsx)(u.Z,{sx:{display:{xs:"none",sm:"inline"},mr:2},src:"/static/mock-images/avatars/avatar-anika_visser.png"}),(0,I.jsx)(O.Z,{disabled:r,fullWidth:!0,onChange:function(e){d(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&f()},placeholder:"Leave a message",value:s,size:"small"}),(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,I.jsx)(G.Z,{title:"Send",children:(0,I.jsx)(a.Z,{sx:{m:1},children:(0,I.jsx)(l.Z,{color:"primary",disabled:!s||r,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:f,children:(0,I.jsx)(V.$,{fontSize:"small"})})})}),(0,I.jsx)(G.Z,{title:"Attach photo",children:(0,I.jsx)(a.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,I.jsx)(l.Z,{disabled:r,edge:"end",onClick:p,children:(0,I.jsx)(_.D,{fontSize:"small"})})})}),(0,I.jsx)(G.Z,{title:"Attach file",children:(0,I.jsx)(a.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,I.jsx)(l.Z,{disabled:r,edge:"end",onClick:p,children:(0,I.jsx)(X.F,{fontSize:"small"})})})})]}),(0,I.jsx)("input",{hidden:!0,ref:i,type:"file"})]}))};function Y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Y(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}q.defaultProps={disabled:!1};var J=function(e){var r=(0,g.I0)(),t=(0,c.useRouter)(),n=(0,o.useState)([]),i=n[0],s=n[1],l=function(){var e=(0,x.Z)(b().mark((function e(n){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r((0,m.Hz)({recipientIds:i.map((function(e){return e.id})),body:n}));case 3:o=e.sent,t.push("/dashboard/chat?threadKey=".concat(o)).catch(console.error),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}();return(0,I.jsxs)(a.Z,U(U({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e),{},{children:[(0,I.jsx)(F,{onAddRecipient:function(e){s((function(r){return r.find((function(r){return r.id===e.id}))?i:[].concat((0,j.Z)(i),[e])}))},onRemoveRecipient:function(e){s((function(r){return r.filter((function(r){return r.id!==e}))}))},recipients:i}),(0,I.jsx)(a.Z,{sx:{backgroundColor:"background.default",flexGrow:1}}),(0,I.jsx)(y.Z,{}),(0,I.jsx)(q,{disabled:0===i.length,onSend:l})]}))},$=t(41664),Q=t(77533),ee=t(11057),re=t(67067),te=t(88364),ne=t(3879),oe=["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"];function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ce(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var se=(0,o.forwardRef)((function(e,r){var t=e.isFocused,n=e.onChange,o=e.onClickAway,i=e.onFocus,c=e.onSelect,s=e.query,l=e.results,p=(0,w.Z)(e,oe),f=s&&t;return(0,I.jsx)(S.Z,{onClickAway:function(){return null===o||void 0===o?void 0:o()},children:(0,I.jsxs)(a.Z,ce(ce({ref:r,sx:{p:2}},p),{},{children:[(0,I.jsx)(O.Z,{fullWidth:!0,onChange:n,onFocus:i,placeholder:"Search contacts",InputProps:{startAdornment:(0,I.jsx)(Z.Z,{position:"start",children:(0,I.jsx)(M.o,{fontSize:"small"})})},value:s}),Boolean(t&&!s)&&(0,I.jsx)(a.Z,{sx:{py:2},children:(0,I.jsx)(ne.C,{message:"Enter a contact name"})}),Boolean(f&&0===l.length)&&(0,I.jsx)(a.Z,{sx:{py:2},children:(0,I.jsxs)(d.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",s,'". Try checking for typos or using complete words.']})}),f&&l.length>0&&(0,I.jsxs)(a.Z,{sx:{py:2},children:[(0,I.jsx)(d.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"}),(0,I.jsx)(D.Z,{children:l.map((function(e){return(0,I.jsxs)(z.ZP,{button:!0,onClick:function(){return function(e){c&&c(e)}(e)},children:[(0,I.jsx)(R.Z,{children:(0,I.jsx)(u.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,I.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})]}))})}));se.defaultProps={isFocused:!1,query:"",results:[]};var ae=t(12195),le=t(35077),ue=t(51107),de=["active","thread","onSelect"];function pe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function fe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?pe(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var he={lessThanXSeconds:"{{count}}s",xSeconds:"{{count}}s",halfAMinute:"30s",lessThanXMinutes:"{{count}}m",xMinutes:"{{count}}m",aboutXHours:"{{count}}h",xHours:"{{count}}h",xDays:"{{count}}d",aboutXWeeks:"{{count}}w",xWeeks:"{{count}}w",aboutXMonths:"{{count}}m",xMonths:"{{count}}m",aboutXYears:"{{count}}y",xYears:"{{count}}y",overXYears:"{{count}}y",almostXYears:"{{count}}y"},xe=fe(fe({},le.Z),{},{formatDistance:function(e,r,t){t=t||{};var n=he[e].replace("{{count}}",r);return t.addSuffix?t.comparison>0?"in "+n:n+" ago":n}}),je=function(e){var r=e.active,t=e.thread,n=e.onSelect,o=(0,w.Z)(e,de),i="5e86809283e28b96d2d38537",c=t.participants.filter((function(e){return e.id!==i})),s=t.messages[t.messages.length-1],l=c.reduce((function(e,r){return[].concat((0,j.Z)(e),[r.name])}),[]).join(", "),p="";if(s){var f=s.authorId===i?"Me: ":"",h="image"===s.contentType?"Sent a photo":s.body;p="".concat(f).concat(h)}return(0,I.jsxs)(z.ZP,fe(fe({disableGutters:!0,disablePadding:!0,divider:!0,onClick:n,sx:fe(fe({},r&&{backgroundColor:"action.selected"}),{},{cursor:"pointer",overflow:"hidden",px:2,py:3})},o),{},{children:[(0,I.jsx)(R.Z,{sx:{display:"flex",justifyContent:{sm:"flex-start",xs:"center"}},children:(0,I.jsx)(ue.Z,{max:2,sx:{"& .MuiAvatar-root":c.length>1?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}},children:c.map((function(e){return(0,I.jsx)(u.Z,{src:e.avatar||void 0},e.id)}))})}),(0,I.jsxs)(a.Z,{sx:{flexGrow:1,mr:2,overflow:"hidden"},children:[(0,I.jsx)(d.Z,{noWrap:!0,variant:"subtitle2",children:l}),(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex"},children:[Boolean(t.unreadCount&&t.unreadCount>0)&&(0,I.jsx)(a.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,mr:1,width:8}}),(0,I.jsx)(d.Z,{color:"textSecondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:p})]})]}),(0,I.jsx)(d.Z,{color:"textSecondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:(0,ae.Z)(s.createdAt,new Date,{addSuffix:!1,locale:xe})})]}))};je.defaultProps={active:!1};var ve=["containerRef","onClose","open"];function be(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ye(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?be(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var me=(0,p.ZP)(Q.ZP)({flexShrink:0,width:380,"& .MuiDrawer-paper":{position:"relative",width:380}}),ge=(0,p.ZP)(Q.ZP)({maxWidth:"100%",width:380,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:380}}),we=function(e){var r=e.containerRef,t=e.onClose,n=e.open,i=(0,w.Z)(e,ve),u=(0,c.useRouter)(),p=(0,g.v9)((function(e){return e.chat})),f=p.threads,h=p.activeThreadId,j=(0,o.useState)(!1),v=j[0],y=j[1],m=(0,o.useState)(""),O=m[0],Z=m[1],P=(0,o.useState)([]),S=P[0],k=P[1],C=(0,s.Z)((function(e){return e.breakpoints.up("md")})),z=function(){var e=(0,x.Z)(b().mark((function e(r){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,Z(t),!t){e.next=10;break}return e.next=6,A.x.getContacts(t);case 6:n=e.sent,k(n),e.next=11;break;case 10:k([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}(),R=(0,I.jsxs)("div",{children:[(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,I.jsx)(d.Z,{variant:"h5",children:"Chats"}),(0,I.jsx)(a.Z,{sx:{flexGrow:1}}),(0,I.jsx)($.default,{href:"/dashboard/chat?compose=true",passHref:!0,children:(0,I.jsx)(ee.Z,{component:"a",onClick:function(){C||null===t||void 0===t||t()},startIcon:(0,I.jsx)(re.v,{}),variant:"contained",children:"Group"})}),(0,I.jsx)(l.Z,{onClick:t,sx:{display:{sm:"none"},ml:2},children:(0,I.jsx)(te.X,{fontSize:"small"})})]}),(0,I.jsx)(se,{isFocused:v,onChange:z,onClickAway:function(){y(!1),Z("")},onFocus:function(){y(!0)},onSelect:function(e){y(!1),Z(""),C||null===t||void 0===t||t(),u.push("/dashboard/chat?threadKey=".concat(e.id)).catch(console.error)},query:O,results:S}),(0,I.jsx)(a.Z,{sx:{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:1,display:v?"none":"block"},children:(0,I.jsx)(B.L,{children:(0,I.jsx)(D.Z,{disablePadding:!0,children:f.allIds.map((function(e){return(0,I.jsx)(je,{active:h===e,onSelect:function(){return function(e){var r,n=f.byId[e];r="GROUP"===n.type?n.id:n.participantIds.find((function(e){return"5e86809283e28b96d2d38537"!==e})),C||null===t||void 0===t||t(),u.push("/dashboard/chat?threadKey=".concat(r)).catch(console.error)}(e)},thread:f.byId[e]},e)}))})})})]});return C?(0,I.jsx)(me,ye(ye({anchor:"left",open:n,SlideProps:{container:null===r||void 0===r?void 0:r.current},variant:"persistent"},i),{},{children:R})):(0,I.jsx)(ge,ye(ye({anchor:"left",ModalProps:{container:null===r||void 0===r?void 0:r.current},onClose:t,open:n,SlideProps:{container:null===r||void 0===r?void 0:r.current},variant:"temporary"},i),{},{children:R}))},Oe=t(44086),Ze=t(66242),Pe=t(50122),Se=t(83965),ke=["body","contentType","createdAt","authorAvatar","authorName","authorType"];function Ce(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function De(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ce(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ze=function(e){var r=e.body,t=e.contentType,n=e.createdAt,i=e.authorAvatar,c=e.authorName,s=e.authorType,l=(0,w.Z)(e,ke),p=(0,o.useState)(!1),f=(p[0],p[1]);return(0,I.jsxs)(a.Z,De(De({sx:{display:"flex",flexDirection:"user"===s?"row-reverse":"row",maxWidth:500,ml:"user"===s?"auto":0,mb:2}},l),{},{children:[(0,I.jsx)(u.Z,{src:i||void 0,sx:{height:32,ml:"user"===s?2:0,mr:"user"===s?0:2,width:32}}),(0,I.jsxs)(a.Z,{sx:{flexGrow:1},children:[(0,I.jsxs)(Ze.Z,{sx:{backgroundColor:"user"===s?"primary.main":"background.paper",color:"user"===s?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,I.jsx)(a.Z,{sx:{mb:1},children:(0,I.jsx)(Pe.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:c})}),"image"===t?(0,I.jsx)(Se.Z,{onClick:function(){return f(!0)},image:r,sx:{height:200}}):(0,I.jsx)(d.Z,{color:"inherit",variant:"body1",children:r})]}),(0,I.jsx)(a.Z,{sx:{display:"flex",justifyContent:"user"===s?"flex-end":"flex-start",mt:1,px:2},children:(0,I.jsxs)(d.Z,{color:"textSecondary",noWrap:!0,variant:"caption",children:[(0,Oe.Z)(n)," ","ago"]})})]})]}))},Re=["messages","participants"];function Ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ee(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Me=function(e){var r=e.messages,t=e.participants,n=(0,w.Z)(e,Re),o="/static/mock-images/avatars/avatar-anika_visser.png";return(0,I.jsx)(a.Z,Ae(Ae({sx:{p:2}},n),{},{children:r.map((function(e){var r,n,i,c=t.find((function(r){return r.id===e.authorId}));return"5e86809283e28b96d2d38537"===e.authorId?(r=o,n="Me",i="user"):(r=c.avatar,n=c.name,i="contact"),(0,I.jsx)(ze,{authorAvatar:r,authorName:n,authorType:i,body:e.body,contentType:e.contentType,createdAt:e.createdAt},e.id)}))}))},Be=t(25464),Ie=t(18972),Te=t(48885),He=t(34717),We=t(54813),Fe=t(82066),Ge=(0,Fe.Z)((0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,I.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Ban"),Ve=(0,Fe.Z)((0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,I.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Camera"),_e=(0,Fe.Z)((0,I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,I.jsx)("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),"Phone"),Xe=t(53474),Le=t(55186),Ne=["participants"];function Ke(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function qe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ke(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ye=function(e){var r=e.participants,t=(0,w.Z)(e,Ne),n=(0,o.useRef)(null),i=(0,o.useState)(!1),c=i[0],s=i[1],p="5e86809283e28b96d2d38537",f=r.filter((function(e){return e.id!==p})),h=f.reduce((function(e,r){return[].concat((0,j.Z)(e),[r.name])}),[]).join(", ");return(0,I.jsxs)(a.Z,qe(qe({sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",flexShrink:0,minHeight:64,px:2,py:1}},t),{},{children:[(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,I.jsx)(ue.Z,{max:2,sx:qe({},f.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:f.map((function(e){return(0,I.jsx)(u.Z,{src:e.avatar||void 0},e.id)}))}),(0,I.jsxs)(a.Z,{sx:{ml:2},children:[(0,I.jsx)(d.Z,{variant:"subtitle2",children:h}),Boolean(1===f.length&&f[0].lastActivity)&&(0,I.jsxs)(d.Z,{color:"textSecondary",variant:"caption",children:["Last active"," ",(0,Oe.Z)(f[0].lastActivity,{addSuffix:!0})]})]})]}),(0,I.jsx)(a.Z,{sx:{flexGrow:1}}),(0,I.jsx)(l.Z,{children:(0,I.jsx)(_e,{fontSize:"small"})}),(0,I.jsx)(l.Z,{children:(0,I.jsx)(Ve,{fontSize:"small"})}),(0,I.jsx)(G.Z,{title:"More options",children:(0,I.jsx)(l.Z,{onClick:function(){s(!0)},ref:n,children:(0,I.jsx)(Xe.B,{fontSize:"small"})})}),(0,I.jsxs)(Be.Z,{anchorEl:n.current,keepMounted:!0,onClose:function(){s(!1)},open:c,children:[(0,I.jsxs)(Ie.Z,{children:[(0,I.jsx)(Te.Z,{children:(0,I.jsx)(Ge,{fontSize:"small"})}),(0,I.jsx)(E.Z,{primary:"Block contact"})]}),(0,I.jsxs)(Ie.Z,{children:[(0,I.jsx)(Te.Z,{children:(0,I.jsx)(Le.r,{fontSize:"small"})}),(0,I.jsx)(E.Z,{primary:"Delete thread"})]}),(0,I.jsxs)(Ie.Z,{children:[(0,I.jsx)(Te.Z,{children:(0,I.jsx)(He.X,{fontSize:"small"})}),(0,I.jsx)(E.Z,{primary:"Archive thread"})]}),(0,I.jsxs)(Ie.Z,{children:[(0,I.jsx)(Te.Z,{children:(0,I.jsx)(We.U,{fontSize:"small"})}),(0,I.jsx)(E.Z,{primary:"Mute notifications"})]})]})]}))};function Ue(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ue(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ue(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}Ye.defaultProps={participants:[]};var $e=function(e){var r=e.threadKey,t=(0,g.I0)(),n=(0,c.useRouter)(),i=(0,g.v9)((function(e){return function(e){var r=e.chat,t=r.threads,n=r.activeThreadId;return t.byId[n]}(e)})),s=(0,o.useRef)(null),l=(0,o.useState)([]),u=l[0],d=l[1],p="5e86809283e28b96d2d38537",f=function(){var e=(0,x.Z)(b().mark((function e(){var o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.x.getParticipants(r);case 3:return o=e.sent,d(o),e.next=7,t((0,m.bJ)(r));case 7:i=e.sent,t((0,m.gG)(i)),t((0,m.RZ)(i)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),n.push("/dashboard/chat").catch(console.error);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){f()}),[r]),(0,o.useEffect)((function(){null!==i&&void 0!==i&&i.messages&&null!==s&&void 0!==s&&s.current&&(s.current.getScrollElement().scrollTop=s.current.el.scrollHeight)}),[i]);var h=function(){var e=(0,x.Z)(b().mark((function e(r){var n,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=6;break}return e.next=4,t((0,m.Hz)({threadId:i.id,body:r}));case 4:e.next=13;break;case 6:return n=u.filter((function(e){return e.id!==p})).map((function(e){return e.id})),e.next=9,t((0,m.Hz)({recipientIds:n,body:r}));case 9:return o=e.sent,e.next=12,t((0,m.bJ)(o));case 12:t((0,m.gG)(o));case 13:null!==s&&void 0!==s&&s.current&&s.current.getScrollElement().scrollTo({top:s.current.el.scrollHeight,behavior:"smooth"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r){return e.apply(this,arguments)}}();return(0,I.jsxs)(a.Z,Je(Je({sx:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}},e),{},{children:[(0,I.jsx)(Ye,{participants:u}),(0,I.jsx)(a.Z,{sx:{backgroundColor:"background.default",flexGrow:1,overflow:"hidden"},children:(0,I.jsx)(B.L,{ref:s,sx:{maxHeight:"100%"},children:(0,I.jsx)(Me,{messages:(null===i||void 0===i?void 0:i.messages)||[],participants:(null===i||void 0===i?void 0:i.participants)||[]})})}),(0,I.jsx)(y.Z,{}),(0,I.jsx)(q,{disabled:!1,onSend:h})]}))},Qe=(0,Fe.Z)((0,I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,I.jsx)("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),(0,I.jsx)("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]}),"ChatAlt2"),er=t(31406),rr=t(55714);function tr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var nr=(0,p.ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var r,t,o=e.theme,i=e.open;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?tr(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}((r={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},(0,n.Z)(r,o.breakpoints.up("md"),{marginLeft:-380}),(0,n.Z)(r,"transition",o.transitions.create("margin",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen})),r),i&&(t={},(0,n.Z)(t,o.breakpoints.up("md"),{marginLeft:0}),(0,n.Z)(t,"transition",o.transitions.create("margin",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.enteringScreen})),t))})),or=function(){var e=(0,c.useRouter)(),r=(0,g.I0)(),t=(0,o.useRef)(null),n=(0,o.useState)(!0),p=n[0],f=n[1],h="true"===e.query.compose,x=e.query.threadKey,j=(0,s.Z)((function(e){return e.breakpoints.up("md")}),{noSsr:!0});(0,o.useEffect)((function(){rr.w.push({event:"page_view"})}),[]),(0,o.useEffect)((function(){r((0,m.hr)())}),[]),(0,o.useEffect)((function(){f(!!j)}),[j]);if(!e.isReady)return null;var v=x?"thread":h?"compose":"blank";return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(i.default,{children:(0,I.jsxs)("title",{children:["Dashboard: Chat | ","Picante"]})}),(0,I.jsx)(a.Z,{component:"main",sx:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},children:(0,I.jsxs)(a.Z,{ref:t,sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0},children:[(0,I.jsx)(we,{containerRef:t,onClose:function(){f(!1)},open:p}),(0,I.jsxs)(nr,{open:p,children:[(0,I.jsx)(a.Z,{sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",p:2},children:(0,I.jsx)(l.Z,{onClick:function(){f((function(e){return!e}))},children:(0,I.jsx)(er.j,{fontSize:"small"})})}),"thread"===v&&(0,I.jsx)($e,{threadKey:x}),"compose"===v&&(0,I.jsx)(J,{}),"blank"===v&&(0,I.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,I.jsx)(u.Z,{sx:{backgroundColor:"primary.main",color:"primary.contrastText",height:56,width:56},children:(0,I.jsx)(Qe,{fontSize:"small"})}),(0,I.jsx)(d.Z,{color:"textSecondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})]})]})})]})};or.getLayout=function(e){return(0,I.jsx)(f.a,{children:(0,I.jsx)(h.c,{children:e})})};var ir=or},33513:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/chat",function(){return t(15983)}])}},function(e){e.O(0,[6313,2169,5464,9332,135,1461,9034,619,5169,5263,9774,2888,179],(function(){return r=33513,e(e.s=r);var r}));var r=e.O();_N_E=r}]);